<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Happy Holidays üéÑ</title>

<style>
  body {
    margin: 0;
    height: 100vh;
    background: radial-gradient(circle at top, #0b2d1a, #020202);
    font-family: Arial, Helvetica, sans-serif;
    overflow: hidden;
    display: flex;
    justify-content: center;
    align-items: center;
    color: white;
  }

  .container {
    text-align: center;
    z-index: 2;
    position: relative;
  }

  .message {
    font-size: clamp(2.5rem, 8vw, 6rem);
    font-weight: bold;
    letter-spacing: 0.2em;
  }

  .message span {
    opacity: 0;
    animation: lights var(--speed) infinite;
    animation-delay: calc(var(--i) * 0.15s);
  }

  .button {
    margin-top: 40px;
    padding: 15px 30px;
    font-size: 1.1rem;
    border: none;
    border-radius: 30px;
    background: gold;
    cursor: pointer;
    box-shadow: 0 0 20px gold;
  }

  @keyframes lights {
    0%   { color: red; text-shadow: 0 0 20px red; }
    25%  { color: gold; text-shadow: 0 0 20px gold; }
    50%  { color: lime; text-shadow: 0 0 20px lime; }
    75%  { color: cyan; text-shadow: 0 0 20px cyan; }
    100% { color: red; text-shadow: 0 0 20px red; }
  }

  /* ‚ùÑÔ∏è Snow */
  .snowflake {
    position: fixed;
    top: -10px;
    width: 8px;
    height: 8px;
    background: white;
    border-radius: 50%;
    pointer-events: none;
    opacity: 0.8;
    animation: fall linear forwards;
  }

  @keyframes fall {
    0% { transform: translateY(0) rotate(0deg); opacity: 0.8; }
    100% { transform: translateY(110vh) rotate(360deg); opacity: 0; }
  }

  .shake {
    animation: shake 0.2s;
  }

  @keyframes shake {
    0% { transform: translate(0,0); }
    25% { transform: translate(5px,0); }
    50% { transform: translate(-5px,0); }
    75% { transform: translate(5px,0); }
    100% { transform: translate(0,0); }
  }
</style>
</head>

<body>

<div class="container" id="container">
  <div class="message">
    <span style="--i:0">H</span>
    <span style="--i:1">A</span>
    <span style="--i:2">P</span>
    <span style="--i:3">P</span>
    <span style="--i:4">Y</span>
    <br><br>
    <span style="--i:5">H</span>
    <span style="--i:6">O</span>
    <span style="--i:7">L</span>
    <span style="--i:8">I</span>
    <span style="--i:9">D</span>
    <span style="--i:10">A</span>
    <span style="--i:11">Y</span>
    <span style="--i:12">S</span>
  </div>

  <button class="button" onclick="startShow()">üéÑ Turn on the Lights</button>
</div>

<audio id="music" loop>
  <source src="deck-the-halls-rock.mp3" type="audio/mpeg">
</audio>

<script>
let speed = 2;
let snowInterval;
let finaleTimeout;

function startShow() {
  const container = document.getElementById('container');
  const music = document.getElementById('music');

  document.querySelectorAll('.message span').forEach(span => {
    span.style.opacity = 1;
    span.style.setProperty('--speed', speed + 's');
  });

  // Play music with fade-in
  music.volume = 0;
  music.play().then(() => {
    let v = 0;
    const fade = setInterval(() => {
      v += 0.05;
      music.volume = Math.min(v, 1);
      if (v >= 1) clearInterval(fade);
    }, 200);
  }).catch(e => console.log('Audio play prevented:', e));

  rhythmEngine();
  startSnow();
  // Big finale snowstorm after 10s
  finaleTimeout = setTimeout(bigFinale, 10000);
}

// üéµ Light rhythm engine
function rhythmEngine() {
  setInterval(() => {
    const burst = Math.random() > 0.6;
    speed = burst ? (Math.random() * 0.5 + 0.6) : (Math.random() * 1.5 + 1.5);

    document.querySelectorAll('.message span').forEach(span => {
      span.style.setProperty('--speed', speed + 's');
    });

    // Screen shake on big beats
    if (burst) {
      const container = document.getElementById('container');
      container.classList.add('shake');
      setTimeout(() => container.classList.remove('shake'), 200);
    }
  }, 3000);
}

// ‚ùÑÔ∏è Snow engine
function startSnow() {
  snowInterval = setInterval(() => {
    createSnowflake();
  }, 150);
}

function createSnowflake() {
  const snowflake = document.createElement('div');
  snowflake.className = 'snowflake';
  snowflake.style.left = Math.random() * window.innerWidth + 'px';
  snowflake.style.animationDuration = (Math.random() * 3 + 3) + 's';
  snowflake.style.opacity = Math.random() * 0.5 + 0.5;
  document.body.appendChild(snowflake);
  setTimeout(() => snowflake.remove(), 6000);
}

// ‚ùÑÔ∏è Big finale snowstorm
function bigFinale() {
  const endInterval = setInterval(() => {
    for (let i = 0; i < 10; i++) createSnowflake();
  }, 100);

  setTimeout(() => clearInterval(endInterval), 5000); // finale lasts 5s
}
</script>

</body>
</html>
